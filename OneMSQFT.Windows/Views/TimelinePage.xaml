<omsqft:BasePageView
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:OneMSQFT.Windows.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:omsqftbehaviors="using:OneMSQFT.Windows.Behaviors"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:templateSelectors="using:OneMSQFT.Windows.DataTemplateSelectors"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:prism="using:Microsoft.Practices.Prism.StoreApps"   
    xmlns:omsqft="using:OneMSQFT.Windows.Views"
    xmlns:omsqftcontrols="using:OneMSQFT.Windows.Controls"
    xmlns:mmppf="using:Microsoft.PlayerFramework"
    xmlns:viewModels="using:OneMSQFT.UILogic.ViewModels"
    xmlns:designViewModels="using:OneMSQFT.Windows.DesignViewModels"
    x:Class="OneMSQFT.Windows.Views.TimelinePage"
    NavigationCacheMode="Required"
    mc:Ignorable="d"
    prism:ViewModelLocator.AutoWireViewModel="True" 
	d:DataContext="{d:DesignInstance designViewModels:DesignTimelinePageViewModel, IsDesignTimeCreatable=True}">

    <omsqft:BasePageView.Resources>
        <viewModels:DataContextProxy x:Key="DataContextProxy" />
        
        <Storyboard x:Name="StoryboardSeeker">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="logoanimation">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:5:0" Value="180"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="logoanimation">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:5:0" Value="-134.658"/>
                <EasingDoubleKeyFrame KeyTime="0:10:0" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="logoanimation">
                <EasingDoubleKeyFrame KeyTime="0:5:0" Value="374.05"/>
                <EasingDoubleKeyFrame KeyTime="0:10:0" Value="763.062"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- container styles -->

        <Style x:Key="TimelineItemContainerStyle" TargetType="GridViewItem">
            <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
            <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewItem">
                        <Grid>
                            <Border x:Name="OuterContainer" HorizontalAlignment="Left" Background="Transparent">
                                <Grid>
                                    <ContentPresenter x:Name="contentPresenter"
        								ContentTransitions="{TemplateBinding ContentTransitions}"
        								ContentTemplate="{TemplateBinding ContentTemplate}"
        								Content="{TemplateBinding Content}"
        								HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
        								VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
        								Margin="0" />
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TimelineExhibitItemContainerStyle" TargetType="GridViewItem">
            <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
            <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
            <Setter Property="Background" Value="White"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewItem">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HoverRectangle" Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation TargetName="ContentContainer" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverPressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation TargetName="ContentContainer" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="Unfocused"/>
                                    <VisualState x:Name="PointerFocused"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionHintStates">
                                    <VisualState x:Name="VerticalSelectionHint"/>
                                    <VisualState x:Name="HorizontalSelectionHint"/>
                                    <VisualState x:Name="NoSelectionHint" />
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselecting"/>
                                    <VisualState x:Name="Unselected"/>
                                    <VisualState x:Name="UnselectedPointerOver"/>
                                    <VisualState x:Name="UnselectedSwiping"/>
                                    <VisualState x:Name="Selecting"/>
                                    <VisualState x:Name="Selected"/>
                                    <VisualState x:Name="SelectedSwiping"/>
                                    <VisualState x:Name="SelectedUnfocused"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DragStates">
                                    <VisualState x:Name="NotDragging" />
                                    <VisualState x:Name="Dragging"/>
                                    <VisualState x:Name="DraggingTarget"/>
                                    <VisualState x:Name="MultipleDraggingPrimary"/>
                                    <VisualState x:Name="MultipleDraggingSecondary"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ReorderHintStates">
                                    <VisualState x:Name="NoReorderHint"/>
                                    <VisualState x:Name="BottomReorderHint"/>
                                    <VisualState x:Name="TopReorderHint"/>
                                    <VisualState x:Name="RightReorderHint"/>
                                    <VisualState x:Name="LeftReorderHint"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DataVirtualizationStates">
                                    <VisualState x:Name="DataAvailable"/>
                                    <VisualState x:Name="DataPlaceholder"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="OuterContainer" HorizontalAlignment="Left" Margin="0" Padding="0" Background="Transparent">
                                <Grid x:Name="ReorderHintContent" Background="Transparent">
                                    <Border x:Name="ContentContainer">
                                        <Grid>
                                            <Border x:Name="ContentBorder" Margin="0">
                                                <Grid>
                                                    <ContentPresenter x:Name="contentPresenter"
        												ContentTransitions="{TemplateBinding ContentTransitions}"
        												ContentTemplate="{TemplateBinding ContentTemplate}"
        												Content="{TemplateBinding Content}"
        												HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
        												VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
        												Margin="0" />
                                                </Grid>
                                            </Border>
                                            <Rectangle x:Name="HoverRectangle" Opacity=".2"/>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TimelineZoomedOutEventItemContainerStyle" TargetType="GridViewItem">
            <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
            <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
            <Setter Property="Background" Value="White"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewItem">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HoverRectangle" Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation TargetName="ContentContainer" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverPressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation TargetName="ContentContainer" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="Unfocused"/>
                                    <VisualState x:Name="PointerFocused"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionHintStates">
                                    <VisualState x:Name="VerticalSelectionHint"/>
                                    <VisualState x:Name="HorizontalSelectionHint"/>
                                    <VisualState x:Name="NoSelectionHint" />
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselecting"/>
                                    <VisualState x:Name="Unselected"/>
                                    <VisualState x:Name="UnselectedPointerOver"/>
                                    <VisualState x:Name="UnselectedSwiping"/>
                                    <VisualState x:Name="Selecting"/>
                                    <VisualState x:Name="Selected"/>
                                    <VisualState x:Name="SelectedSwiping"/>
                                    <VisualState x:Name="SelectedUnfocused"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DragStates">
                                    <VisualState x:Name="NotDragging" />
                                    <VisualState x:Name="Dragging"/>
                                    <VisualState x:Name="DraggingTarget"/>
                                    <VisualState x:Name="MultipleDraggingPrimary"/>
                                    <VisualState x:Name="MultipleDraggingSecondary"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ReorderHintStates">
                                    <VisualState x:Name="NoReorderHint"/>
                                    <VisualState x:Name="BottomReorderHint"/>
                                    <VisualState x:Name="TopReorderHint"/>
                                    <VisualState x:Name="RightReorderHint"/>
                                    <VisualState x:Name="LeftReorderHint"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DataVirtualizationStates">
                                    <VisualState x:Name="DataAvailable"/>
                                    <VisualState x:Name="DataPlaceholder"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="OuterContainer" HorizontalAlignment="Left" Margin="0" Padding="0" Background="Transparent">
                                <Grid x:Name="ReorderHintContent" Background="Transparent">
                                    <Border x:Name="ContentContainer">
                                        <Grid>
                                            <Border x:Name="ContentBorder" Margin="0">
                                                <Grid>
                                                    <ContentPresenter x:Name="contentPresenter"
        												ContentTransitions="{TemplateBinding ContentTransitions}"
        												ContentTemplate="{TemplateBinding ContentTemplate}"
        												Content="{TemplateBinding Content}"
        												HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
        												VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
        												Margin="0" />
                                                </Grid>
                                            </Border>
                                            <Rectangle x:Name="HoverRectangle" Opacity=".2"/>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="HeroButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource ButtonBackgroundThemeBrush}" />
            <Setter Property="Foreground" Value="{StaticResource ButtonForegroundThemeBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ButtonBorderThemeBrush}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Margin" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="Container" Background="White" RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <CompositeTransform/>
                            </Grid.RenderTransform>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HoverRectangle" Storyboard.TargetProperty="Fill">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
        										Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedBackgroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
        										Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedForegroundThemeBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <DoubleAnimation Duration="0" To="0.95" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="Container" d:IsOptimized="True"/>
                                            <DoubleAnimation Duration="0" To="0.95" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="Container" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="Border"
        						Background="{TemplateBinding Background}"
        						BorderBrush="{TemplateBinding BorderBrush}"
        						BorderThickness="{TemplateBinding BorderThickness}"
        						Margin="0">
                                <Grid>
                                    <ContentPresenter x:Name="ContentPresenter"
        							    Content="{TemplateBinding Content}"
        							    ContentTransitions="{TemplateBinding ContentTransitions}"
        							    ContentTemplate="{TemplateBinding ContentTemplate}"
        							    Margin="{TemplateBinding Padding}"
        							    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
        							    VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                    <Rectangle x:Name="HoverRectangle" Opacity=".2"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <DataTemplate x:Key="TimelineExhibitTemplate">
            <Grid HorizontalAlignment="Left" 
                Width="{Binding DataSource.ExhibitItemWidth, Source={StaticResource DataContextProxy}}" 
                Height="{Binding DataSource.ExhibitItemHeight, Source={StaticResource DataContextProxy}}" 
              VerticalAlignment="Top">
                <Border Background="Transparent"
				BorderBrush="White"
				BorderThickness="0"
				Margin="0">
                    <Image Source="{Binding HeroPhotoFilePath}"
					Stretch="UniformToFill">
                    </Image>
                </Border>
                <TextBlock Margin="0,20,0,0"
					FontSize="42"
					Height="Auto"
					Text="{Binding SquareFootageString}"
					TextWrapping="NoWrap"
                    TextAlignment="Center"
					TextTrimming="WordEllipsis" VerticalAlignment="Top">
                </TextBlock>
                <TextBlock Text="{Binding Name}"
                    VerticalAlignment="Top"
					Margin="0,60,0,0"
					FontSize="20"
					Height="Auto"
					TextTrimming="CharacterEllipsis"
					TextWrapping="NoWrap"
                    TextAlignment="Center">
                </TextBlock>
                <TextBlock Text="{Binding Description}"
                    VerticalAlignment="Top"
					Margin="0,80,0,0"
					FontSize="20"
					Height="Auto"
					TextTrimming="CharacterEllipsis"
					TextWrapping="NoWrap"
                    TextAlignment="Center">
                </TextBlock>
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="TimelineZoomedOutEventItemTemplate">
            <Border BorderBrush="{StaticResource OneMSQFTAnswerGrayBrush}" 
                BorderThickness="1,1,1,1" 
                Background="{Binding EventColor, Mode=OneWay}" 
                Width="{Binding DataSource.ZoomedOutItemWidth, Source={StaticResource DataContextProxy}}" 
                Height="{Binding DataSource.ZoomedOutItemHeight, Source={StaticResource DataContextProxy}}" 
                Padding="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="50*"/>
                        <RowDefinition Height="50*"/>
                        <RowDefinition Height="50*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="{Binding SquareFootageString}"
    				TextTrimming="WordEllipsis"
    				FontSize="30"
    				Margin="0,10,0,16" HorizontalAlignment="Center" FontFamily="Segoe UI"/>
                    <TextBlock Text="{Binding Name, Mode=OneWay}"
    				FontSize="20" Grid.Row="1" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding DateStart, Mode=OneWay}"
    				FontSize="20" Grid.Row="2" HorizontalAlignment="Center"/>
                </Grid>
            </Border>
        </DataTemplate>

        <DataTemplate x:Key="OMSQFTTimelineFeaturedEventItemTemplate">
            <Border BorderThickness="1" Background="{Binding EventColor, Mode=OneWay}">
                <Grid Width="{Binding DataSource.EventItemWidth, Mode=OneWay, Source={StaticResource DataContextProxy}}"
                      Height="{Binding DataSource.EventItemHeight, Mode=OneWay, Source={StaticResource DataContextProxy}}" >
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid Background="{StaticResource OneMSQFTWhiteBrush}" 
                          Margin="100" Grid.Column="0" Grid.RowSpan="4" Grid.ColumnSpan="4" 
                          Width="{Binding ColorColumnWidth, Mode=OneWay}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" MinHeight="159" />
                            <RowDefinition Height="Auto" MinHeight="59"/>
                            <RowDefinition Height="Auto" MinHeight="159"/>
                            <RowDefinition Height="Auto" MinHeight="167"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding DataSource.TotalSquareFeet, Source={StaticResource DataContextProxy}}"
						Foreground="{StaticResource OneMSQFTBlackBrush}"
						FontSize="60"
						Margin="15,0,15,0" Grid.Row="1" FontFamily="Segoe UI Light"/>
                        <TextBlock Text="{Binding Strings.IntroBlurb, Source={StaticResource PortableStrings}}"
						Foreground="{StaticResource OneMSQFTBlackBrush}"
						TextWrapping="Wrap"
						Margin="15,20,15,19" Grid.Row="2" VerticalAlignment="Center" FontSize="24" FontWeight="Light" LineHeight="32" LineStackingStrategy="BlockLineHeight"/>
                        <TextBlock Text="{Binding Strings.AppTitle, Source={StaticResource PortableStrings}}"
						Foreground="{StaticResource OneMSQFTBlackBrush}"
						Style="{StaticResource CaptionTextStyle}"
						TextWrapping="NoWrap"
						Margin="15,0" Grid.Row="3" VerticalAlignment="Top" Height="20"/>
                    </Grid>
                </Grid>
            </Border>
        </DataTemplate>

        <DataTemplate x:Key="OMSQFTTimelineEventItemTemplate">
            <Border BorderThickness="0">
                <Grid Width="{Binding DataSource.EventItemWidth, Mode=OneWay, Source={StaticResource DataContextProxy}}"
                      Height="{Binding DataSource.EventItemHeight, Mode=OneWay, Source={StaticResource DataContextProxy}}">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <Button Click="VideoButton_Clicked" 
                            CommandParameter="{Binding}" 
                            Command="{Binding DataSource.EventHeroItemClickCommand, Mode=OneWay, Source={StaticResource DataContextProxy}}" 
                            Grid.Column="1" Grid.RowSpan="2" Grid.ColumnSpan="2" 
                            Style="{StaticResource HeroButtonStyle}"  >
                        <Button.Content>
                            <Image Source="{Binding PhotoFilePath, Mode=OneWay}"
					            VerticalAlignment="Center"
					            HorizontalAlignment="Center"
					            AutomationProperties.Name="{Binding Name}" 
                                Stretch="Fill"/>
                        </Button.Content>
                    </Button>

                    <Grid Background="{Binding EventColor, Mode=OneWay}" Grid.RowSpan="4">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto" MinHeight="59"/>
                            <RowDefinition Height="Auto" MinHeight="59"/>
                            <RowDefinition Height="Auto" MinHeight="167"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding SquareFootageString}"
						Foreground="{StaticResource OneMSQFTWhiteBrush}"
						FontSize="60"
						Margin="15,0,15,0" Grid.Row="1" FontFamily="Segoe UI Light"/>
                        <TextBlock Text="{Binding Name, Mode=OneWay}"
						Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}"
						Style="{StaticResource TitleTextStyle}"
						TextWrapping="NoWrap"
						Margin="15,0,15,0" Grid.Row="2"/>
                        <TextBlock Text="{Binding Description}"
						Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}"
						Style="{StaticResource CaptionTextStyle}"
						TextWrapping="NoWrap"
						Margin="15,0" Grid.Row="3" HorizontalAlignment="Left"/>
                    </Grid>
                    <Grid Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" Grid.RowSpan="2">
                        <GridView ItemsSource="{Binding Exhibits}"
                              ItemTemplate="{StaticResource TimelineExhibitTemplate}"
                              ItemContainerStyle="{StaticResource TimelineExhibitItemContainerStyle}"
                              SelectionMode="Single"
                              IsItemClickEnabled="True"
                              IsTapEnabled="True">
                            <GridView.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <ItemsWrapGrid MaximumRowsOrColumns="2" Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </GridView.ItemsPanel>
                            <interactivity:Interaction.Behaviors>
                                <core:EventTriggerBehavior EventName="ItemClick">
                                    <omsqftbehaviors:NavigateWithEventArgsToPageAction 
                                TargetPage="OneMSQFT.Windows.Views.ExhibitDetailsPage"
                                EventArgsParameterPath="ClickedItem.Id" />
                                </core:EventTriggerBehavior>
                            </interactivity:Interaction.Behaviors>
                        </GridView>
                    </Grid>
                </Grid>
            </Border>
        </DataTemplate>


    </omsqft:BasePageView.Resources>
	<omsqft:BasePageView.BottomAppBar>
		<AppBar>
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition/>
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>
				<StackPanel Orientation="Horizontal">
                    <AppBarButton x:Name="AboutButton" HorizontalAlignment="Stretch" Label="About" VerticalAlignment="Stretch" Icon="More"/>
                </StackPanel>
				<StackPanel Grid.Column="1" HorizontalAlignment="Right" Orientation="Horizontal">
                    <AppBarButton x:Name="AdminButton" HorizontalAlignment="Stretch" Label="Admin" VerticalAlignment="Stretch" Icon="Admin" Flyout="{StaticResource AdminFlyout}"/>
				</StackPanel>
			</Grid>
		</AppBar>
	</omsqft:BasePageView.BottomAppBar>

    <Grid Background="White">
    	<Grid.RowDefinitions>
    		<RowDefinition/>
    		<RowDefinition Height="5*"/>
    	</Grid.RowDefinitions>
        <Grid.ChildrenTransitions>
            <TransitionCollection>
                <EntranceThemeTransition/>
            </TransitionCollection>
        </Grid.ChildrenTransitions>


        <Rectangle x:Name="logoanimation" Fill="Transparent" Height="153" Width="83" RenderTransformOrigin="0.5,0.5" d:IsHidden="True">
            <Rectangle.RenderTransform>
                <CompositeTransform/>
            </Rectangle.RenderTransform>
        </Rectangle>
        <Grid x:Name="LogoGrid" Margin="20" Visibility="Collapsed">
        	<Rectangle Fill="Red" HorizontalAlignment="Left" Height="100" VerticalAlignment="Center" Width="100"/>
        	<TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding TotalSquareFeet, Mode=OneWay}" VerticalAlignment="Center" Foreground="Black" FontSize="32" Margin="0,31,0,30"/>
        </Grid>
        <SemanticZoom x:Name="semanticZoom" Background="White"
                      IsZoomedInViewActive="True" 
                      ViewChangeCompleted="semanticZoom_ViewChangeCompleted" 
                      ViewChangeStarted="semanticZoom_ViewChangeStarted" Grid.RowSpan="2">
            <SemanticZoom.ZoomedOutView>
                <GridView x:Name="zoomedOutGrid"
                          VerticalAlignment="Bottom"
                          Padding="0"
                          Height="{Binding DataSource.ZoomedOutGridHeight, Source={StaticResource DataContextProxy}}"
                          Background="White"
                          IsSwipeEnabled="False"
                          SelectionMode="Single"
                          IsItemClickEnabled="True"
                          IsTapEnabled="True"
                          ItemsSource="{Binding TimeLineMenuItems}"
                          AutomationProperties.AutomationId="HubPageGridView"
                          ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                          ItemTemplate="{StaticResource TimelineZoomedOutEventItemTemplate}"
                          ItemContainerStyle="{StaticResource TimelineZoomedOutEventItemContainerStyle}">
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid />
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                <!-- The MultipleSizedGridView is a custom user control that is used to display multiple-sized elements in the grid.
                It also includes the functionality of the custom AutoRotatingGridView control, that automatically rearranges items,
                when the app is switched to portrait mode, or to minimal layout mode. -->
                <omsqftcontrols:MultipleSizedGridView x:Name="itemsGridView"
                    AutomationProperties.AutomationId="HubPageItemGridView"
                    AutomationProperties.Name="Grouped Items"
                    Margin="0"
                    Padding="0"
                    Background="White"
                    SelectionMode="None"
                    ItemsSource="{Binding TimeLineItems}"
                    IsSwipeEnabled="False"
                    IsTapEnabled="False"
                    IsItemClickEnabled="False"
                    ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                    Loaded="itemsGridView_Loaded" 
                    ItemContainerStyle="{StaticResource TimelineItemContainerStyle}">

                    <omsqftcontrols:MultipleSizedGridView.ItemTemplateSelector>
                        <templateSelectors:TimelineDataTemplateSelector
                            EventTimelineItemTemplate="{StaticResource OMSQFTTimelineEventItemTemplate}"
                            FeaturedTimelineItemTemplate="{StaticResource OMSQFTTimelineFeaturedEventItemTemplate}"/>
                    </omsqftcontrols:MultipleSizedGridView.ItemTemplateSelector>
                    <omsqftcontrols:MultipleSizedGridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </omsqftcontrols:MultipleSizedGridView.ItemsPanel>
                    <omsqftcontrols:MultipleSizedGridView.PortraitItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical" />
                        </ItemsPanelTemplate>
                    </omsqftcontrols:MultipleSizedGridView.PortraitItemsPanel>

                    <omsqftcontrols:MultipleSizedGridView.PortraitGroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <Button AutomationProperties.Name="{Binding Title}"
                                            Style="{StaticResource TextPrimaryButtonStyle}"
                                            Command="{Binding CategoryNavigationCommand}"
                                            Margin="5,0,0,10">
                                        <Button.Content>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Title}"
                                                           Style="{StaticResource GroupHeaderTextStyle}" />
                                                <TextBlock Text="{StaticResource ChevronGlyph}"
                                                           Style="{StaticResource GroupHeaderTextStyle}"
                                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                           Margin="10,0" />
                                            </StackPanel>
                                        </Button.Content>
                                    </Button>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <VariableSizedWrapGrid ItemWidth="250"
                                                           ItemHeight="250"
                                                           Orientation="Horizontal"
                                                           Margin="0,0,0,20" />
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </omsqftcontrols:MultipleSizedGridView.PortraitGroupStyle>
                    <omsqftcontrols:MultipleSizedGridView.MinimalGroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <Button AutomationProperties.Name="Group Title"
                                            Style="{StaticResource TextPrimaryButtonStyle}"
                                            Command="{Binding CategoryNavigationCommand}"
                                            Margin="10,10,0,10">
                                        <Button.Content>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Title}"
                                                           Style="{StaticResource GroupHeaderTextStyle}" />
                                                <TextBlock Text="{StaticResource ChevronGlyph}"
                                                           Style="{StaticResource GroupHeaderTextStyle}"
                                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                           Margin="10,0" />
                                            </StackPanel>
                                        </Button.Content>
                                    </Button>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <StackPanel HorizontalAlignment="Stretch" Margin="0,0,0,0" />
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </omsqftcontrols:MultipleSizedGridView.MinimalGroupStyle>
                </omsqftcontrols:MultipleSizedGridView>
            </SemanticZoom.ZoomedInView>
        </SemanticZoom>
        <Popup x:Name="VideoPopup" Closed="VideoPopup_Closed" IsLightDismissEnabled="True" Style="{StaticResource VideoPopupStyle}" >
            <Grid >
                <omsqftcontrols:VideoPlayerUserControl 
                    SelectedEvent="{Binding DataSource.SelectedEvent, Source={StaticResource DataContextProxy}}"
                    Width="{Binding DataSource.FullScreenWidth, Mode=OneWay, Source={StaticResource DataContextProxy}}" 
                    Height="{Binding DataSource.FullScreenHeight, Mode=OneWay, Source={StaticResource DataContextProxy}}" />
                <AppBarButton Icon="Cancel" Click="AppBarButton_Click" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20"/>
            </Grid>
        </Popup>
    </Grid>
</omsqft:BasePageView>
